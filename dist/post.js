(()=>{var e,t,i,r,a={},n={};function s(e){var t=n[e];if(void 0!==t)return t.exports;var i=n[e]={exports:{}};return a[e].call(i.exports,i,i.exports,s),i.exports}s.m=a,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,s.t=function(i,r){if(1&r&&(i=this(i)),8&r)return i;if("object"==typeof i&&i){if(4&r&&i.__esModule)return i;if(16&r&&"function"==typeof i.then)return i}var a=Object.create(null);s.r(a);var n={};e=e||[null,t({}),t([]),t(t)];for(var o=2&r&&i;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((e=>n[e]=()=>i[e]));return n.default=()=>i,s.d(a,n),a},s.d=(e,t)=>{for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},s.f={},s.e=e=>Promise.all(Object.keys(s.f).reduce(((t,i)=>(s.f[i](e,t),t)),[])),s.u=e=>e+".post.js",s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i={},r="butterfly-share-img:",s.l=(e,t,a,n)=>{if(i[e])i[e].push(t);else{var o,l;if(void 0!==a)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var f=d[c];if(f.getAttribute("src")==e||f.getAttribute("data-webpack")==r+a){o=f;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,s.nc&&o.setAttribute("nonce",s.nc),o.setAttribute("data-webpack",r+a),o.src=e),i[e]=[t];var m=(t,r)=>{o.onerror=o.onload=null,clearTimeout(u);var a=i[e];if(delete i[e],o.parentNode&&o.parentNode.removeChild(o),a&&a.forEach((e=>e(r))),t)return t(r)},u=setTimeout(m.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=m.bind(null,o.onerror),o.onload=m.bind(null,o.onload),l&&document.head.appendChild(o)}},s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;s.g.importScripts&&(e=s.g.location+"");var t=s.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");if(i.length)for(var r=i.length-1;r>-1&&!e;)e=i[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=e})(),(()=>{var e={179:0};s.f.j=(t,i)=>{var r=s.o(e,t)?e[t]:void 0;if(0!==r)if(r)i.push(r[2]);else{var a=new Promise(((i,a)=>r=e[t]=[i,a]));i.push(r[2]=a);var n=s.p+s.u(t),o=new Error;s.l(n,(i=>{if(s.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var a=i&&("load"===i.type?"missing":i.type),n=i&&i.target&&i.target.src;o.message="Loading chunk "+t+" failed.\n("+a+": "+n+")",o.name="ChunkLoadError",o.type=a,o.request=n,r[1](o)}}),"chunk-"+t,t)}};var t=(t,i)=>{var r,a,[n,o,l]=i,d=0;if(n.some((t=>0!==e[t]))){for(r in o)s.o(o,r)&&(s.m[r]=o[r]);l&&l(s)}for(t&&t(i);d<n.length;d++)a=n[d],s.o(e,a)&&e[a]&&e[a][0](),e[a]=0},i=self.webpackChunkbutterfly_share_img=self.webpackChunkbutterfly_share_img||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})(),s.e(725).then(s.bind(s,725)),s.e(120).then(s.t.bind(s,120,23)),s.e(493).then(s.bind(s,493)),s.e(744).then(s.t.bind(s,744,23));const o="img"===page.cover_type?page.cover:theme.avatar.img,l=strip_html(page.content);let d=l.substring(0,100);l.length>100&&(d+=" ...");var c=window.location.href,f=ele(".post-meta-date-created").innerHTML.split("-");function m(e){var t=new Image,i=e.toDataURL("image/png");sessionStorage.setItem("si_"+c,i),t.src=i,document.getElementById("bf-share-img-loaded-container").appendChild(t),ele("#bf-share-img").style.display="none",ele("div.bf-share-img-loading",(e=>{e.parentNode.removeChild(e)})),setTimeout((()=>{window.share_dialog.handleUpdate(),ele(".bf-share-img-dialog .mdui-dialog-actions",(e=>{let t=document.createElement("span");t.classList.add("bf-save-info"),t.innerHTML='<i class="mdui-icon material-icons">&#xe80d;</i> 长按/右键保存图片',e.insertBefore(t,e.firstChild)}))}),5)}ele(".bf-si-time").innerHTML=`${f[2]}<br><span class="bf-si-time-2">${f[0]}/${f[1]}</span>`,ele(".bf-s-img-li").innerHTML="<span class='social-share-icon icon-img' onclick='new QRCode(document.getElementById(\"bf-si-qr\"),{text:urlHash,width:70,height:70,correctLevel:QRCode.CorrectLevel.L,colorLight:\"#f5f5f5\"});'><i class='fa-fw fas fa-share' style='font-family:\"Font Awesome 6 Free\"!important'></i></span>",ele("#post").innerHTML=`<link rel="stylesheet" href="https://source.casecori.top/js/mdui.min.css"><div class="bf-share-img" id="bf-share-img"><div class="bf-si-head mdui-color-theme" style='background-image:linear-gradient(rgba(0,0,0,0) 45%,rgba(0,0,0,.7) 100%),url("${url_for(o)}")'><p>CasecoRI</p><span>${page.title}</span></div><div class="bf-si-sum">${d}</div><div class="bf-si-box"><span>扫描二维码继续阅读</span><div class="bf-si-qr" id="bf-si-qr"></div></div><div class="bf-si-time"></div></div>`,document.getElementsByClassName("bf-s-img-li").length>0&&document.querySelector(".bf-s-img-li > .icon-img").addEventListener("click",(function(e){if(e.preventDefault(),window.share_dialog=mdui.dialog({content:'<div class="bf-share-img-loaded" id="bf-share-img-loaded-container"></div><div class="mdui-valign bf-share-img-loading"><div class="mdui-center"><div class="mdui-spinner"></div></div></div>',buttons:[{text:"关闭"}],history:!1,cssClass:"bf-share-img-dialog"}),mdui.updateSpinners(),ele("#bf-share-img").style.display="block",sessionStorage.getItem("si_"+c)){var t=new Image;t.src=sessionStorage.getItem("si_"+c),document.getElementById("bf-share-img-loaded-container").appendChild(t),ele("#bf-share-img").style.display="none",ele("div.bf-share-img-loading",(e=>{e.parentNode.removeChild(e)})),setTimeout((()=>{window.share_dialog.handleUpdate(),ele(".bf-share-img-dialog .mdui-dialog-actions",(e=>{let t=document.createElement("span");t.classList.add("bf-save-info"),t.innerHTML='<i class="mdui-icon material-icons">&#xe80d;</i> 长按/右键保存图片',e.insertBefore(t,e.firstChild)}))}),5)}else html2canvas(document.getElementById("bf-share-img"),{useCORS:!0}).then(m)}),!1)})();